{% extends "base.html" %}
{% load static %}

{% block title %}My Orders - {{ site_name }}{% endblock %}

{% block content %}
<div class="container my-5">
    <div class="row justify-content-center">
        <div class="col-md-12 col-lg-10"> <!-- Widened to match order_detail.html -->
            <div class="order-history-card p-5" style="background: #f8f9fa; border-radius: 20px; box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);">
                <h2 class="text-center mb-5 fw-bold" style="color: #1a2e44; font-family: 'Georgia', serif; font-size: 2.25rem;">
                    Your Order History
                </h2>

                {% if orders %}
                    <div class="table-responsive">
                        <table class="table table-hover align-middle" style="border-radius: 12px; overflow: hidden;">
                            <thead style="background: #1a2e44; color: #ffffff;">
                                <tr>
                                    <th class="py-3 ps-4">Order ID</th>
                                    <th class="py-3">Date</th>
                                    <th class="py-3">Total Items</th>
                                    <th class="py-3">Total Cost</th>
                                    <th class="py-3">Status</th>
                                    <th class="py-3 pe-4">Actions</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for order in orders %}
                                <tr style="background: {% cycle '#ffffff' '#f1f3f5' %}; transition: background-color 0.3s ease;">
                                    <td class="ps-4 py-3"><span style="color: #800000; font-weight: 500;">#{{ order.id }}</span></td>
                                    <td class="py-3">{{ order.created_at|date:"F j, Y, H:i" }}</td>
                                    <td class="py-3">{{ order.items.count }}</td>
                                    <td class="py-3" style="color: #3498db; font-weight: 600;">${{ order.get_total_cost|floatformat:2 }}</td>
                                    <td class="py-3">
                                        {% if order.paid %}
                                            <span class="badge rounded-pill bg-success text-white px-3 py-2">Paid</span>
                                        {% else %}
                                            <span class="badge rounded-pill bg-warning text-dark px-3 py-2">Pending</span>
                                        {% endif %}
                                    </td>
                                    <td class="pe-4 py-3">
                                        <a href="{% url 'order_detail' order.id %}" class="btn btn-sm btn-outline-primary px-3 py-1" style="border-radius: 50px; transition: all 0.3s ease;">View Details</a>
                                    </td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                {% else %}
                    <div class="alert alert-info text-center p-4" style="background: #e7f3fe; border: none; border-radius: 12px; box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05);">
                        You haven't placed any orders yet. Start shopping!
                        <p class="mt-3">
                            <a href="{% url 'products:product_list' %}" class="btn btn-primary px-4 py-2" style="background: #3498db; border: none; border-radius: 50px; transition: all 0.3s ease;">
                                Go to Products
                            </a>
                        </p>
                    </div>
                {% endif %}

                <div class="text-center mt-5">
                    <a href="{% url 'profile' %}" class="btn btn-outline-secondary px-4 py-2" style="border-radius: 50px; transition: all 0.3s ease;">Back to Profile</a>
                </div>
            </div>
        </div>
    </div>
</div>

{% block extra_head %}
<style>
    .order-history-card {
        position: relative;
        overflow: hidden;
    }
    a:hover {
        color: #800000 !important;
    }
    .btn:hover {
        transform: scale(1.05);
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.15);
    }
    .table th, .table td {
        border: none;
    }
    .table tr:hover {
        background: #e6f0fa !important;
    }
    @media (max-width: 768px) {
        .order-history-card {
            padding: 2rem;
        }
        h2 {
            font-size: 1.75rem;
        }
        .table-responsive {
            font-size: 0.9rem;
        }
        .table th, .table td {
            padding: 0.75rem;
        }
        .btn {
            display: block;
            width: 100%;
            margin-bottom: 1rem;
        }
        .btn:last-child {
            margin-bottom: 0;
        }
    }
</style>
{% endblock %}
{% endblock %}